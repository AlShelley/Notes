<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  lonelyorWiki
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="lonelyorWiki" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
 
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:www.lonelyor.org/lonelyorWiki ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">首页</a></li>
        
        <li id=""><a target="_blank" href="archives.html">归档</a></li>
        
        <li id=""><a target="_blank" href="ruby.html">流光</a></li>
        
        <li id=""><a target="_blank" href="beautiful.html">惊鸿</a></li>
        
        <li id=""><a target="_blank" href="lose.html">失乐园</a></li>
        
        <li id=""><a target="_blank" href="search.html">北斗</a></li>
        
        <li id=""><a target="_blank" href="about.html">关于</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; lonelyorWiki</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="index.html">首页</a></li>
        
        <li><a target="_blank" href="archives.html">归档</a></li>
        
        <li><a target="_blank" href="ruby.html">流光</a></li>
        
        <li><a target="_blank" href="beautiful.html">惊鸿</a></li>
        
        <li><a target="_blank" href="lose.html">失乐园</a></li>
        
        <li><a target="_blank" href="search.html">北斗</a></li>
        
        <li><a target="_blank" href="about.html">关于</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="%E7%B3%BB%E7%BB%9F.html">系统</a></li>
        
            <li><a href="%E7%BD%91%E7%BB%9C.html">网络</a></li>
        
            <li><a href="%E5%BC%80%E5%8F%91.html">开发</a></li>
        
            <li><a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html">数据库</a></li>
        
            <li><a href="%E5%AE%89%E5%85%A8.html">安全</a></li>
        
            <li><a href="%E5%B7%A5%E5%85%B7.html">工具</a></li>
        
            <li><a href="%E9%A3%8E%E8%8A%B1%E9%9B%AA%E6%9C%88.html">风花雪月</a></li>
        
            <li><a href="%E6%98%9F%E7%81%AB%E6%B5%81%E8%90%A4.html">星火流萤</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="15446866501207.html">
                
                  <h1>IIS短文件名漏洞</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">漏洞原理</h2>

<hr/>

<p>windows在创建一个新文件时，操作系统还会生成 8.3 格式的兼容 MS-DOS 的（短）文件名，以允许基于 MS-DOS 或16位 windows 的程序访问这些文件。    </p>

<h2 id="toc_1">利用场景</h2>

<hr/>

<p>1、用于猜解文件/文件名<br/>
2、.Net Framework 的拒绝服务攻击（不常见）</p>

<h2 id="toc_2">检测方法</h2>

<hr/>

<p><strong>黑盒测试</strong><br/>
使用<a href="https://github.com/lijiejie/IIS_shortname_Scanner">IIS短文件名扫描器</a><br/>
<strong>白盒测试</strong>
几乎所有的 windows 操作系统，在 cmd 中使用命令：</p>

<pre class="line-numbers"><code class="language-bat">dir /x
</code></pre>

<p>如图：
<img src="media/15446866501207/%E7%9F%AD%E6%96%87%E4%BB%B6%E5%90%8D%E6%98%BE%E7%A4%BA.png" alt="短文件名显示"/></p>

<h2 id="toc_3">修复方案</h2>

<hr/>

<p>1、升级 .net framework 至 4.0 版本或以上<br/>
2、修改注册表键值<br/>
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem 修改NtfsDisable8dot3NameCreation为1。（此项默认为0）<br/>
此设置用于禁用短文件名功能，重启后生效。<br/>
或者通过 CMD 命令：    </p>

<pre class="line-numbers"><code class="language-txt">Windows Server 2008 R2
查询是否开启短文件名功能：fsutil 8dot3name query
关闭该功能：fsutil 8dot3name set 1

Windows Server 2003
关闭该功能：fsutil behavior set disable8dot3 1
</code></pre>

<p>以上操作只能防止新创建的文件/文件名不会出现短文件名，而当前文件/文件名依然保持短文件名。完整解决方案还需要如下操作：<br/>
3、<br/>
　　a、从当前目录中创建一个副本,并将其重命名为 tempNew；<br/>
　　b、将当前目录重命名为“tempOld”；<br/>
　　c、将“tempNew”重命名为原来的目录名。<br/>
4、禁止 url 中使用 “~” 或它的 Unicode 编码。（IIS7.0的请求阻塞不能完全阻止“~”波浪号。）</p>

<hr/>

<hr/>

<hr/>

<h2 id="toc_4">背景知识</h2>

<hr/>

<p>windows 支持的长文件名最多为 255 个字符。windows 还以 8.3 格式生成与 MS-DOS 兼容的（短）文件名，以允许基于 MS-DOS 或 16 位 windows 的程序访问这些文件。<br/>
8.3格式短文件名规范中：<br/>
‘8’是指文件名或目录名的主体部分小于等于 8 个字节；‘3’是指文件名的扩展名部分小于等于 3 个字节。<br/>
windows 会按以下方式从长文件名生成短文件名：<br/>
windows 首先会删除文件名中的任何无效字符和空格。无效字符包括：</p>

<pre class="line-numbers"><code class="language-txt">.&quot;/\[]:;=,
</code></pre>

<p>由于短文件名只能包含一个英文句点（.），因此 windows 将删除文件名中的其他英文句点，即使文件名中最后一个英文句点后面是有效的非空格字符也是如此。例如：windows 从长文件名 This is a really long filename.123.456.789.txt 生成短文件名 Thisis~1.txt 否则，windows 将忽略最后一个英文句点，而使用倒数第二个英文句点。例如：windows从长文件名 This is a really long filename.123.456.789. 生成短文件名 Thisis~1.789。<br/>
生成短文件名若需要复制的话，windows 将文件名截断为 6 个字符，并在后边附加一个波形符号（~）和一个数字（创建的每一个以 ~1 结尾的唯一文件名，复制文件以 ~2、~3等结尾。）    </p>

<h2 id="toc_5">影响范围</h2>

<hr/>

<p>Windows 10 Pro released in July 2015Windows 10 Enterprise released in July 2015Microsoft Windows Server 2003 Standard EditionMicrosoft Windows Server 2003 Enterprise EditionMicrosoft Windows Server 2003 Datacenter EditionMicrosoft Windows Server 2003 Web EditionMicrosoft Windows Server 2003, Enterprise x64 EditionMicrosoft Windows Small Business Server 2003 Standard EditionMicrosoft Windows Small Business Server 2003 Premium EditionMicrosoft Windows XP Home EditionMicrosoft Windows XP Professional EditionMicrosoft Windows Datacenter Server Limited EditionMicrosoft Windows Advanced Server, Limited EditionMicrosoft Windows 2000 ServerMicrosoft Windows 2000 Advanced ServerMicrosoft Windows 2000 Professional EditionMicrosoft Windows NT Workstation 3.5Microsoft Windows NT Workstation 3.51Microsoft Windows NT Workstation 4.0 开发员版Microsoft Windows NT Server 3.51Microsoft Windows NT Server 4.0 Standard EditionWindows Vista Service Pack 2Windows Vista BusinessWindows Vista EnterpriseWindows Vista Home PremiumWindows Vista UltimateWindows Server 2008 Service Pack 2Windows Server 2008 StandardWindows Server 2008 EnterpriseWindows Server 2008 DatacenterWindows Server 2008 for Itanium-Based SystemsWindows 7 Service Pack 1Windows 7 Home PremiumWindows 7 ProfessionalWindows 7 EnterpriseWindows 7 UltimateWindows Server 2008 R2 Service Pack 1Windows Server 2008 R2 StandardWindows Server 2008 R2 EnterpriseWindows Server 2008 R2 DatacenterWindows Server 2008 R2 for Itanium-Based SystemsWindows 8 EnterpriseWindows 8 ProWindows Server 2012 FoundationWindows Server 2012 FoundationWindows Server 2012 FoundationWindows Server 2012 FoundationWindows Server 2012 StandardWindows Server 2012 StandardWindows Server 2012 StandardWindows Server 2012 StandardWindows Server 2012 DatacenterWindows Server 2012 DatacenterWindows Server 2012 DatacenterWindows Server 2012 Datacenter
列表内所有操作系统均受影响（数据来源日期：20171213）<br/>
该漏洞有其局限性：<br/>
1、只能猜解文件/文件夹名前六位，以及扩展名前三位<br/>
2、名称较短的文件是没有响应的短文件名的<br/>
3、需要 IIS 和 .net 同时满足。  </p>

<h2 id="toc_6">漏洞详情</h2>

<hr/>

<p>在 windows 上的 Apache（Apache支持短文件名）上运行的 web 应用程序正在创建一个长文件名文件（如sql备份文件或会话文件，假设文件名是 backup-082119f75623eb7abd7bf357698ff66c.sql，windows 将创建短文件名 BACKUP〜1.SQL）。这种情况下，如果我们用短文件名访问这个文件，那么就有可能获取这个包含sql数据库备份的文件。<br/>
比较著名的一个例子：<br/>
wordpress 有一个备份博客的插件，该插件会为备份创建一个自定义目录（backup-88456）。备份完成后，该目录包含一个名为 wordpress_wp_20120702_576.sql 的文件  ，即 WordPress 数据库备份。这本应该难以猜测的，因为我们的目录名称中有5个数字加上日期和另外3个数字，即使忽略日期也至少有 100,000,000 个组合。然而由于短文件名的原因，目录名会变成 BACKUP~1 而文件名会变成 WORDPR~1.SQL。100,000,000 个组合被缩减为一个组合。    </p>

<h2 id="toc_7">漏洞利用</h2>

<hr/>

<p><strong>短文件名漏洞</strong>
漏洞利用需要使用到通配符。在 windows 中，* 可以匹配n个字符（n可以为0,一个星号和n个星号的意义一样）。判断某站点是否存在 IIS 短文件名爆破，构造如下payload：    </p>

<pre class="line-numbers"><code class="language-http">1. http://www.xxx.com/*~1*/.aspx
2. http://www.xxx.com/l1j1e*~1*/.aspx
</code></pre>

<p>若1返回404而2返回400，则可以判断目标站点存在漏洞。<br/>
判断漏洞存在后，继续猜解目录下是否存在a开头的文件或文件夹，访问：    </p>

<pre class="line-numbers"><code class="language-http">http://www.xxx.com/a*~1*/.aspx
</code></pre>

<p>若存在将返回404，不存在则返回400。以此类推，不断向下猜解所有的6个字符。<br/>
到此要考虑两种情况，若abcdef开头的是一个文件夹则    </p>

<pre class="line-numbers"><code class="language-http">http://www.xxx.com/abcdef*/~1/.aspx
</code></pre>

<p>返回404。若abcdef开头的是一个文件，则    </p>

<pre class="line-numbers"><code class="language-http">http://www.xxx.com/abcdef*~1/.aspx
</code></pre>

<p>返回404（注意！返回404表示存在）同理我们可以猜出文件后缀名：    </p>

<pre class="line-numbers"><code class="language-http">http://www.xxx.com/abcdef*~1*h*/.aspx
</code></pre>

<p>若返回404则代表扩展名中肯定存在h字符。<br/>
利用此漏洞可以猜解后台地址、敏感文件/文件名（如备份的rar、bak、sql等）；某些情况下，可以通过短文件名漏洞直接下载对应的文件（如备份sql文件）。<br/>
<br>
<strong>.Net Framework 拒绝服务攻击</strong><br/>
当请求文件夹名称包含 ~1 的请求，会导致不存在该文件的 .Net Framework 去递归查询所有根目录。如果只有一个“~1”是无效的，当“~1”大于一个，比如像这样：        </p>

<pre class="line-numbers"><code class="language-http">\wwwtest\fuck~1\~1\~1\~1.aspx
</code></pre>

<p>此时文件系统会这样调用：    </p>

<pre class="line-numbers"><code class="language-txt">\wwwtest                           SUCCESS
\wwwtest\fuck~1\~1\~1\~1           PATH NOT FOUND
\wwwtest\fuck~1                    NAME NOT FOUND
\wwwtest\fuck~1\~1\                PATH NOT FOUND
\wwwtest\fuck~1\~1\~1\             PATH NOT FOUND
\wwwtest\fuck~1\~1\~1\~1.aspx      PATH NOT FOUND
\wwwtest\fuck~1\~1\~1\~1.aspx      PATH NOT FOUND
\wwwtest\fuck~1\~1\~1              PATH NOT FOUND
\wwwtest\fuck~1\~1\~1\~1.aspx      PATH NOT FOUND
\wwwtest\fuck~1\~1\~1              PATH NOT FOUND
\wwwtest\fuck~1\~1                 PATH NOT FOUND
\wwwtest\fuck~1                    NAME NOT FOUND
\wwwtest                           SUCCESS
\wwwtest                           SUCCESS
</code></pre>

<p>如果我们请求的文件/文件夹名同时存在大小写时，这个请求会被请求两次，一次是原封不动的请求，一次是全部使用小写的请求。<br/>
下表显示了每个请求的FS调用的数量（Windows 2008 R2, IIS 7.5(latest patch – June 2012), and .Net framework 4.0.30319 (在别的系统下可能会不同)）<br/>
<img src="media/15446866501207/F5%E8%B0%83%E7%94%A8.png" alt="F5调用"/></p>

<p>这个问题适用于当时的 .Net framework 的所有版本(<br/>
    IIS 1.0, Windows NT 3.51<br/>
    IIS 2.0, Windows NT 4.0<br/>
    IIS 3.0, Windows NT 4.0 Service Pack 2<br/>
    IIS 4.0, Windows NT 4.0 Option Pack<br/>
    IIS 5.0, Windows 2000<br/>
    IIS 5.1, Windows XP Professional and Windows XP Media Center Edition<br/>
    IIS 6.0, Windows Server 2003 and Windows XP Professional x64 Edition<br/>
    IIS 7.0, Windows Server 2008 and Windows Vista<br/>
    IIS 7.5, Windows 7 (error remotely enabled or no web.config)<br/>
    IIS 7.5, Windows 2008 (classic pipeline mode))<br/>
只是 F5 的调用次数会有不同。    </p>

<h2 id="toc_8">参考链接</h2>

<hr/>

<ul>
<li><a href="http://www.lijiejie.com/iis-win8-3-shortname-brute/">http://www.lijiejie.com/iis-win8-3-shortname-brute/</a><br/></li>
<li><a href="https://www.acunetix.com/blog/articles/windows-short-8-3-filenames-web-security-problem/">https://www.acunetix.com/blog/articles/windows-short-8-3-filenames-web-security-problem/</a><br/></li>
<li><a href="http://www.freebuf.com/articles/4908.html">http://www.freebuf.com/articles/4908.html</a><br/></li>
<li><a href="https://support.microsoft.com/zh-cn/help/121007/how-to-disable-8-3-file-name-creation-on-ntfs-partitions">https://support.microsoft.com/zh-cn/help/121007/how-to-disable-8-3-file-name-creation-on-ntfs-partitions</a><br/></li>
<li><a href="https://soroush.secproject.com/downloadable/microsoft_iis_tilde_character_vulnerability_feature.pdf">https://soroush.secproject.com/downloadable/microsoft_iis_tilde_character_vulnerability_feature.pdf</a><br/></li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/12/13</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%AE%89%E5%85%A8.html'>安全</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15446864537652.html">
                
                  <h1>Web安全工程师求职清单</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<blockquote>
<p>一年前写的一点玩意，没什么卵用</p>
</blockquote>

<h2 id="toc_0">安全资讯</h2>

<p><a href="http://www.freebuf.com/">freebuf</a></p>

<p><a href="https://www.t00ls.net/">tools</a></p>

<p><a href="https://www.secpulse.com/">安全脉搏</a></p>

<p><a href="https://packetstormsecurity.com/">数据包风暴</a></p>

<p><a href="http://www.4hou.com/">嘶吼</a></p>

<p><a href="https://www.aqniu.com/">安全牛</a></p>

<p><a href="https://www.anquanke.com/">安全客</a></p>

<p><a href="https://www.sec-wiki.com/">sec-wiki</a></p>

<p><a href="http://www.secdoctor.com/">中国信息安全博士网</a></p>

<h2 id="toc_1">威胁情报</h2>

<p>暂略</p>

<h2 id="toc_2">安全工具</h2>

<p><a href="https://www.ctftools.com/down/">最强安全工具集</a></p>

<ul>
<li>burpsuite(抓包)</li>
<li>sqlmap(sql注入)</li>
<li>whireshark(网络抓包)</li>
<li>中国菜刀(webshell、一句话后门)</li>
<li>HxD(十六进制编辑器和磁盘编辑器)</li>
<li>nmap(扫描)</li>
<li>hydra(爆破)</li>
<li>cain(爆破)</li>
<li>metasploit(漏洞利用)</li>
<li>mitmproxy(http/https代理)</li>
<li>commix(命令注入)</li>
<li>httrack(网站克隆)</li>
<li>netcat(瑞士军刀-网络调试和探测工具)</li>
<li>scapy(python的交互式数据包操作程序和库)</li>
<li>empire(域渗透)</li>
</ul>

<h2 id="toc_3">靶机环境</h2>

<h2 id="toc_4">安全知识库</h2>

<p><a href="https://www.anquanquan.info/">安全圈</a></p>

<p><a href="http://wiki.open.qq.com/wiki/%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91%E5%AE%89%E5%85%A8%E8%A7%84%E8%8C%83">腾讯安全开发规范</a></p>

<p><a href="https://highon.coffee/blog/cheat-sheet/">安全研究备忘单</a></p>

<p><a href="https://portswigger.net/kb/issues">Burp漏洞定义</a></p>

<p><a href="https://www.offensive-security.com/metasploit-unleashed/">MSF框架终极指南</a></p>

<p><a href="https://www.owasp.org/index.php/Main_Page">OWASP</a></p>

<p><a href="http://vipread.com/index">vipread知识库</a></p>

<p><a href="https://kb.help.rapid7.com/docs/">Rapid7知识库</a></p>

<p><a href="https://kernelnewbies.org/">linux内核研究</a></p>

<p><a href="http://www.loner.fm/bugs/">乌云漏洞</a></p>

<p><a href="https://wooyun.js.org/">乌云文章</a></p>

<p><a href="http://www.office-cn.net/t/api/index.html?web.htm">WindowsAPI参考手册</a></p>

<p><a href="https://support.portswigger.net/customer/portal/articles/2326039-the-burp-methodology">Burp方法论</a></p>

<p><a href="https://ctf-wiki.github.io/ctf-wiki/">CTF-Wiki</a></p>

<p><a href="https://github.com/ctfs/">CTFs</a></p>

<p><a href="https://ctftime.org">ctftime</a></p>

<p><a href="https://www.codesec.net/">代码安全</a></p>

<p><a href="https://silic.wiki/doku.php">习科小黑板</a></p>

<p><a href="https://bbs.safewiki.org/portal.php">安全文库</a></p>

<p><a href="http://webscan.360.cn/vul">360网站常见漏洞</a></p>

<h2 id="toc_5">漏洞平台</h2>

<p><a href="https://butian.360.cn/">补天</a></p>

<p><a href="https://www.vulbox.com/">漏洞盒子</a></p>

<p><a href="https://www.bugbank.cn/">漏洞银行</a></p>

<p><a href="http://www.cnvd.org.cn/">CNVD国家信息安全漏洞共享平台</a></p>

<p><a href="https://src.edu-info.edu.cn/">教育行业漏洞报告平台</a></p>

<p><a href="https://www.seebug.org">Seebug</a></p>

<p><a href="http://0xsafe.org/vuldb.html">Vuldbs漏洞平台</a></p>

<h2 id="toc_6">技能要求</h2>

<ul>
<li>不同场景下的渗透测试流程、方法</li>
<li>常见漏洞的攻击方法和防御方法</li>
<li>代码级白盒测试能力</li>
<li>owasp_top10概念、原理、测试方法、防御方法</li>
<li>主流防火墙、IDS、IPS、漏洞扫描工具的安装、使用方法</li>
<li>熟悉python、php、javascript、c、c++等语言的一种或多种</li>
<li>cissp之类的证书或ctf解题能力是加分项</li>
<li>各种靶机环境搭建</li>
<li>安全分析报告的编写</li>
<li>对业务快速熟悉的能力（业务安全重点、应用范围划分、业务安全基线）</li>
<li>spring、struts、hibernate框架安全相关</li>
<li>web组件加固、服务器加固、数据库加固</li>
<li>域渗透、dns、arp等内网渗透知识</li>
<li>各类提权如系统提权、数据库提权等</li>
<li>风险评估、等级保护、安全体系规划、安全体系建设。包括信息资产管理、安全威胁和风险评估、安全解决方案制定、信息安全体系实施</li>
<li>Nginx、Apache、Tomcat等安全配置基线</li>
<li>各类安全测试标准(ISSAF、OSSTMM、OWASP、微软SDLC、OPENSAMM、BSIMM、SSECMM)</li>
<li>网络日志分析、攻击流量检测</li>
<li>hadoop、openstack、sdn云安全</li>
<li>mongodb、redis、HBASE等nosql安全</li>
<li>burpsuite插件编写</li>
<li>python脚本开发能力、shell脚本开发能力</li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/12/13</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%AE%89%E5%85%A8.html'>安全</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15446861280668.html">
                
                  <h1>hackthebox邀请码</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<blockquote>
<p>不打算好好玩的麻烦不要瞎注册，大量的垃圾账号只会污染整个生态环境。</p>
</blockquote>

<p>进入注册页面，观察页面js文件会找到以下内容：</p>

<pre class="line-numbers"><code class="language-javascript">eval(function(p,a,c,k,e,d){e=function(c){return c.toString(36)};if(!&#39;&#39;.replace(/^/,String)){while(c--){d[c.toString(a)]=k[c]||c.toString(a)}k=[function(e){return d[e]}];e=function(){return&#39;\\w+&#39;};c=1};while(c--){if(k[c]){p=p.replace(new RegExp(&#39;\\b&#39;+e(c)+&#39;\\b&#39;,&#39;g&#39;),k[c])}}return p}(&#39;1 i(4){h 8={&quot;4&quot;:4};$.9({a:&quot;7&quot;,5:&quot;6&quot;,g:8,b:\&#39;/d/e/n\&#39;,c:1(0){3.2(0)},f:1(0){3.2(0)}})}1 j(){$.9({a:&quot;7&quot;,5:&quot;6&quot;,b:\&#39;/d/e/k/l/m\&#39;,c:1(0){3.2(0)},f:1(0){3.2(0)}})}&#39;,24,24,&#39;response|function|log|console|code|dataType|json|POST|formData|ajax|type|url|success|api|invite|error|data|var|verifyInviteCode|makeInviteCode|how|to|generate|verify&#39;.split(&#39;|&#39;),0,{}))
</code></pre>

<p>1、然后把这段代码放到 <a href="http://jsbeautifier.org/">http://jsbeautifier.org/</a> 进行美化，得出：
2、</p>

<pre class="line-numbers"><code class="language-javascript">function verifyInviteCode(code) {
    var formData = {
        &quot;code&quot;: code
    };
    $.ajax({
        type: &quot;POST&quot;,
        dataType: &quot;json&quot;,
        data: formData,
        url: &#39;/api/invite/verify&#39;,
        success: function(response) {
            console.log(response)
        },
        error: function(response) {
            console.log(response)
        }
    })
}

function makeInviteCode() {
    $.ajax({
        type: &quot;POST&quot;,
        dataType: &quot;json&quot;,
        url: &#39;/api/invite/how/to/generate&#39;,
        success: function(response) {
            console.log(response)
        },
        error: function(response) {
            console.log(response)
        }
    })
}
</code></pre>

<p>可以看出上述代码是让我们访问：<a href="https://www.hackthebox.eu/api/invite/generate">https://www.hackthebox.eu/api/invite/generate</a>
然后修改请求方式为post
于是就得到了：</p>

<pre class="line-numbers"><code class="language-javascript">{&quot;success&quot;:1,&quot;data&quot;:{&quot;code&quot;:&quot;VlJQS1QtQUNXRUstT0tYREwtQ0lZQVUtS0NZSlU=&quot;,&quot;format&quot;:&quot;encoded&quot;},&quot;0&quot;:200}
</code></pre>

<p>将code进行base64解码，就得到了邀请码。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/12/13</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%AE%89%E5%85%A8.html'>安全</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15433912730163.html">
                
                  <h1>FOEENSICS 101</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>题目：<a href="https://ctflearn.com/problems/96">https://ctflearn.com/problems/96</a>
<img src="http://images.lonelyor.org/ctflearn-96-1.png" alt="ctflearn-96-1"/>
访问域名，然后会下载一张图片。
接下来我们使用十六进制编码器打开这张图片，会发现：
<img src="http://images.lonelyor.org/ctflearn-96-2.png" alt="ctflearn-96-2"/>
标红部分即是flag。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/11/28</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%AE%89%E5%85%A8.html'>安全</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15433875205785.html">
                
                  <h1>BASIC INJECTION 基本注入</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>题目：<a href="https://ctflearn.com/problems/88">https://ctflearn.com/problems/88</a>
解：
访问题目中提到的：<a href="https://web.ctflearn.com/web4/">域名</a>
<img src="http://images.lonelyor.org/ctflearn-basic-injection-1.png" alt="ctflearn-basic-injection-1"/>
然后输入payload，得到以下数据，方框中的即为flag。
<img src="http://images.lonelyor.org/ctflearn-basic-injection-2.png" alt="ctflearn-basic-injection-2"/></p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/11/28</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E5%AE%89%E5%85%A8.html'>安全</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15428715286450.html">
                
                  <h1>windows右键添加管理员获得所有权</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<blockquote>
<p>右键添加获得管理员所有权是个比较方便的功能。</p>
</blockquote>

<p>打开记事本或者别的文本编辑器，然后写入如下内容:</p>

<pre class="line-numbers"><code class="language-cmd">Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\*\shell\runas]
@=&quot;管理员取得所有权&quot;
&quot;NoWorkingDirectory&quot;=&quot;&quot;
[HKEY_CLASSES_ROOT\*\shell\runas\command]
@=&quot;cmd.exe /c takeown /f \&quot;%1\&quot; &amp;&amp; icacls \&quot;%1\&quot; /grant administrators:F&quot;
&quot;IsolatedCommand&quot;=&quot;cmd.exe /c takeown /f \&quot;%1\&quot; &amp;&amp; icacls \&quot;%1\&quot; /grant administrators:F&quot;
[HKEY_CLASSES_ROOT\exefile\shell\runas2]
@=&quot;管理员取得所有权&quot;
&quot;NoWorkingDirectory&quot;=&quot;&quot;
[HKEY_CLASSES_ROOT\exefile\shell\runas2\command]
@=&quot;cmd.exe /c takeown /f \&quot;%1\&quot; &amp;&amp; icacls \&quot;%1\&quot; /grant administrators:F&quot;
&quot;IsolatedCommand&quot;=&quot;cmd.exe /c takeown /f \&quot;%1\&quot; &amp;&amp; icacls \&quot;%1\&quot; /grant administrators:F&quot;
[HKEY_CLASSES_ROOT\Directory\shell\runas]
@=&quot;管理员取得所有权&quot;
&quot;NoWorkingDirectory&quot;=&quot;&quot;
[HKEY_CLASSES_ROOT\Directory\shell\runas\command]
@=&quot;cmd.exe /c takeown /f \&quot;%1\&quot; /r /d y &amp;&amp; icacls \&quot;%1\&quot; /grant administrators:F /t&quot;
&quot;IsolatedCommand&quot;=&quot;cmd.exe /c takeown /f \&quot;%1\&quot; /r /d y &amp;&amp; icacls \&quot;%1\&quot; /grant administrators:F /t&quot;
</code></pre>

<p>然后另存为：管理员获得所有权.reg
文件名可以随便写，但是后缀记得写成reg（改成这个后缀后文件图标就会变成一个破碎蓝色魔方）。
然后右键以管理员身份运行，若弹框注册表xxx的，同意就行了。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2018/11/22</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E7%B3%BB%E7%BB%9F.html'>系统</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   <a href="all_24.html">&laquo; Prev Page</a>  
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="all_26.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="https://www.lonelyor.org/lonelyorWiki/media/15483045488413/205a66b0a6c34ba7184d2d68a9f62dd8.jpg" /></div>
            
                <h1>lonelyorWiki</h1>
                <div class="site-des">一个用来记录知识的网站。</div>
                <div class="social">









<a target="_blank" class="github" target="_blank" href="https://github.com/AlShelley/lonelyorWiki" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:lonelyor.org@gmail.com" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="%E7%B3%BB%E7%BB%9F.html"><strong>系统</strong></a>
        
            <a href="%E7%BD%91%E7%BB%9C.html"><strong>网络</strong></a>
        
            <a href="%E5%BC%80%E5%8F%91.html"><strong>开发</strong></a>
        
            <a href="%E6%95%B0%E6%8D%AE%E5%BA%93.html"><strong>数据库</strong></a>
        
            <a href="%E5%AE%89%E5%85%A8.html"><strong>安全</strong></a>
        
            <a href="%E5%B7%A5%E5%85%B7.html"><strong>工具</strong></a>
        
            <a href="%E9%A3%8E%E8%8A%B1%E9%9B%AA%E6%9C%88.html"><strong>风花雪月</strong></a>
        
            <a href="%E6%98%9F%E7%81%AB%E6%B5%81%E8%90%A4.html"><strong>星火流萤</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15747334018156.html">msfvenom各类木马生成脚本</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15724200154293.html">v2ray实现科学上网</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15708455642675.html">如何使用cmd开启3389端口与查看3389端口</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15695779467285.html">给linux终端加一个移动到回收站的功能</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15694777838251.html">Proxmox TASK ERROR: Failed to run vncproxy.解决办法</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>



  














<style type="text/css">
figure{margin: 0;padding: 0;}
figcaption{text-align:center;}

/* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background:#b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
}

@media print {
    code[class*="language-"],
    pre[class*="language-"] {
        text-shadow: none;
    }
}

/* Code blocks */
pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
    background: #F7F7F7;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: slategray;
}

.token.punctuation {
    color: #999;
}

.namespace {
    opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
    color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
    color: #9a6e3a;
    background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
    color: #07a;
}

.token.function,
.token.class-name {
    color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
    color: #e90;
}

.token.important,
.token.bold {
    font-weight: bold;
}
.token.italic {
    font-style: italic;
}

.token.entity {
    cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

<div id="container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
  id:'<%= page.date %>',
  owner: 'AlShelley',
  repo: 'https://github.com/AlShelley/lonelyorWiki',
  oauth: {
    client_id: '2a0c6ad761806835e987',       
    client_secret: '083280496d60e9becae3c653f97b18db292333cf',  
  },
})
gitment.render('container')
</script>

  </body>
</html>
